let pages = [
  {
    food: {
      title: "Nasi Lemak",
      text: "A dish originating in Malay cuisine that consists of rice cooked in coconut milk and pandan leaf.",
      img: "picture/NasiLemak2.jpg"
    },
    ingredients: {
      p1: "2 1/2 cups jasmine rice (1 pound 2 ounces, 500 g). 7 ounces (200 ml) coconut milk, preferably from a carton variety (see notes). 2 pandan leaves, cut crosswise into 2-inch pieces. One 1-inch knob (25 g) fresh peeled ginger, julienned. 1 1/2 teaspoons Diamond Crystal kosher salt, plus more to taste; for table salt use half as much by volume or the same weight. To options: Sambal tumis, Fried ikan bilis, Sliced hard-boiled eggs, Fried peanuts, Sliced cucumbers, Fresh or frozen banana leaf"
    },
    recipe: {
      img: "picture/NasiLemak3.jpg",
      p1: "Step 1: Set up a tiered steamer (see notes), filling the bottom section with about 3 inches of water. Bring to a boil over high heat. Line the steamer tier with cheesecloth. Step 2: Meanwhile, place the rice in a strainer and rinse the grains under running water until the water is almost clear. Drain rice, then transfer to a 10-inch nonstick skillet and add the coconut milk, 7 ounces (200ml) water, pandan leaves, ginger, and salt.Cook on medium heat, stirring continuously, until it thickens like rice pudding, 8-10 minutes. Step 3: Transfer the rice mixture to the cheesecloth-lined steamer tier and spread it in a roughly even layer. Set steamer tier over bottom section of boiling water, cover, and steam over medium heat until the grains are fully cooked, about 45 minutes; start checking rice doneness after 35 minutes of steaming. Once the rice reaches your preferred texture, turn off the heat and leave it to continue steaming, covered, until the steaming stops. The rice should be just cooked, with separate grains and a rich flavor of coconut. Step 4: Serve with sambal tumis and other nasi lemak accompaniments, depending on your preference (note that it's typical to leave the pandan leaves in the nasi lemak, as it's understood they will be removed at the table by the diner; do not eat them). If desired, nasi lemak can be served on a banana leaf, which will contribute its own fragrance to the dish as the rice and toppings are eaten. ",
    },
  },
  {
    food: {
      title: "Mango Sticky Rice",
      text: "A traditional Southeast Asian and South Asian dessert made with glutinous rice, fresh mango and coconut milk.",
      img: "picture/MangoRice2.jpg"
    },
    ingredients: {
      p1: "185g sticky rice. 350ml  water. 1 can coconut milk (400ml). 50g brown sugar + 1 tablespoon. ½ teaspoon salt. 1 teaspoon cornstarch. 1-2 large, ripe mangos (sliced or cubed). Sesame seeds (optional)."
    },
    recipe: {
      img: "picture/MangoRice3.jpg",
      p1: "Step 1: Wash the rice, changing the water between mixes until it runs clear. Cover with 350g clean water and soak your rice for 40 minutes, up to a few hours. Step 2: If steaming, drain the water and flatten your rice in a steaming basket. Steam for 30 to 40 minutes. If boiling, transfer your water and rice into a saucepan and bring to a boil. Once boiling, reduce to a simmer and cover with a lid. Simmer for 20-30 minutes, or until the water is absorbed. Step 3: While the rice cooks, reserve 60ml of coconut milk in a bowl and pour the rest into a small saucepan and combine with sugar and salt. Bring to just below boiling and stir until the sugar has dissolved, then remove from the heat. Step 4: Transfer your cooked rice to a bowl and stir in the coconut mixture. Cover and leave for 30 minutes for the liquid to be absorbed. Step 5: While your mixture sits, combine a splash of the remaining coconut milk to your cornstarch and mix into a slurry. Then pour the slurry, 1 tablespoon sugar, a pinch of salt, and the rest of the reserved coconut milk into a small, clean saucepan and heat gently until it thickens. Set it aside. Step 6: Time to put your mango sticky rice together. Use a small bowl to mould a quarter of your rice mixture onto the plate and divide mango amongst the servings. Pour coconut sauce over the top of your rice, sprinkle with sesame seeds if using, and enjoy."
    }
  },
  {
    food: {
      title: "Taco",
      text: "A traditional Mexican dish consisting of a small hand-sized corn- or wheat-based tortilla topped with a filling.",
      img: "picture/Taco2.jpg"
    },
    ingredients: {
      p1: "8 small corn or flour tortillas. 300g beef, chicken, or pork (sliced or shredded). 1 tbsp vegetable oil. 1 tsp chili powder. 1 tsp cumin. 1 tsp paprika. 1/2 tsp salt. 1/2 tsp black pepper. 1 onion, diced. 2 cloves garlic, minced. 1 tomato, diced. 1/2 cup shredded lettuce. 1/2 cup shredded cheese. 1/4 cup sour cream. Fresh cilantro (for garnish). Lime wedges (for serving)",
    },
    recipe: {
      img: "picture/Taco3.jpg",
      p1: "Step 1: Preheat the oven to 425 degrees F (220 degrees C). Line a rimmed baking sheet with foil or parchment paper and lightly coat with 1 tablespoon olive oil. Step 2: Combine beef, onion, green chiles, chili powder, cumin, garlic powder, and salt in a medium bowl and mix until well incorporated. Step 3: Wrap tortillas in a damp paper towel and microwave just until softened, about 30 seconds. Step 4: Spread about 3 tablespoons beef mixture over half of a tortilla in a very thin layer that reaches to the edges  Spread about 1 tablespoon beans onto the other half. Sprinkle all over with about 2 tablespoons cheese. Fold tortilla in half to make a taco; place on prepared baking sheet. Repeat with remaining tortillas, meat and cheese. Brush tops of tacos with remaining oil. Step 5: Bake tacos in the preheated oven, flipping halfway through, until lightly browned, toasted, and crisp around the edges, 30 to 35 minutes. Serve with desired toppings."
    }
  },
  {
    food: {
      title: "Churros",
      text: "A popular Spanish fried-dough pastry, often coated in cinnamon sugar and served with hot chocolate for dipping.",
      img: "picture/Churros2.jpg"
    },
    ingredients: {
      p1: "1 cup water. 2 1/2 tbsp sugar. 1/2 tsp salt. 2 tbsp vegetable oil. 1 cup all-purpose flour. Oil for frying. 1/2 cup sugar mixed with 1 tsp ground cinnamon (for coating). Chocolate sauce (optional, for dipping)."
    },
    recipe: {
      img: "picture/Churros3.jpg",
      p1: "Step 1: In a saucepan, bring water, sugar, salt, and vegetable oil to a boil. Remove from heat and stir in flour until mixture forms a ball. Step 2: Heat oil in a deep fryer or pan. Step 3: Transfer dough to a piping bag with a star tip and pipe strips into the hot oil. Fry until golden brown. Step 4: Drain on paper towels, then roll in cinnamon sugar. Step 5: Serve warm with chocolate sauce for dipping."
    }
  },
  {
    food: {
      title: "Bunny Chow",
      text: "A South African street food dish consisting of a hollowed-out loaf of bread filled with spicy curry.",
      img: "picture/BunnyChow2.jpg"
    },
    ingredients: {
      p1: "1 loaf white bread. 500g chicken, beef, or lamb (cubed). 2 tbsp vegetable oil. 1 onion, diced. 2 cloves garlic, minced. 1 tbsp ginger, grated. 2 tbsp curry powder. 2 tomatoes, chopped. 1 cup potatoes, cubed. 1 cup chicken stock. Salt and pepper to taste. Fresh cilantro for garnish."
    },
    recipe: {
      img: "picture/BunnyChow3.jpg",
      p1: "Step 1: Heat oil in a pan and sauté onion, garlic, and ginger until fragrant. Step 2: Add curry powder and stir well. Step 3: Add meat and brown on all sides. Step 4: Add tomatoes, potatoes, stock, salt, and pepper. Simmer until meat and potatoes are tender, about 30–40 minutes. Step 5: Hollow out a loaf of bread and fill it with the curry. Garnish with cilantro and serve hot."
    }
  },
  {
    food: {
      title: "Meat Pie",
      text: "An Australian classic pastry filled with minced meat, gravy, and seasonings, enjoyed as a popular street food snack.",
      img: "picture/MeatPie2.jpg"
    },
    ingredients: {
      p1: "2 tbsp olive oil. 1 onion, finely chopped. 500g ground beef. 2 tbsp flour. 1 cup beef stock. 2 tbsp Worcestershire sauce. Salt and pepper to taste. 2 sheets puff pastry. 1 egg, beaten (for brushing)."
    },
    recipe: {
      img: "picture/MeatPie3.jpeg",
      p1: "Step 1: Heat oil in a pan and cook onion until soft. Step 2: Add ground beef and cook until browned. Step 3: Stir in flour, stock, Worcestershire sauce, salt, and pepper. Simmer until thickened. Step 4: Preheat oven to 200°C (400°F). Step 5: Line pie tins with puff pastry, fill with meat mixture, and cover with pastry lid. Brush with beaten egg. Step 6: Bake for 25–30 minutes until golden brown. Serve warm."
    }
  },
  {
    food: {
      title: "Arepas",
      text: "A Venezuelan and Colombian staple made from ground maize dough, grilled or fried, and filled with cheese, meats, or vegetables.",
      img: "picture/Arepas2.png"
    },
    ingredients: {
      p1: "2 cups pre-cooked cornmeal (masarepa). 2 1/2 cups warm water. 1 tsp salt. 1 tbsp vegetable oil. 1 cup shredded cheese (or fillings of choice: chicken, beef, beans, avocado)."
    },
    recipe: {
      img: "picture/Arepas3.jpg",
      p1: "Step 1: In a bowl, mix cornmeal, salt, and warm water until smooth. Let the dough rest for 5 minutes. Step 2: Divide dough into equal portions and shape into discs. Step 3: Heat oil on a griddle or skillet. Cook arepas for 5–7 minutes on each side until golden brown. Step 4: Slice open and fill with cheese, meat, or vegetables. Serve warm."
    }
  },
  {
    food: {
      title: "Pad Thai",
      text: "A famous Thai stir-fried noodle dish with shrimp or chicken, tofu, eggs, peanuts, and bean sprouts.",
      img: "picture/PadThai2.jpg"
    },
    ingredients: {
      p1: "200g rice noodles. 2 tbsp vegetable oil. 2 cloves garlic, minced. 150g shrimp or chicken. 2 eggs, beaten. 1/2 cup firm tofu, cubed. 1/4 cup roasted peanuts. 1/2 cup bean sprouts. 2 tbsp fish sauce. 1 tbsp tamarind paste. 1 tsp sugar. Lime wedges and fresh cilantro for garnish."
    },
    recipe: {
      img: "picture/PadThai3.jpg",
      p1: "Step 1: Soak rice noodles in warm water until soft. Step 2: Heat oil in a wok, sauté garlic until fragrant. Step 3: Add shrimp or chicken and cook until done. Step 4: Push to one side and scramble eggs. Step 5: Add tofu, noodles, fish sauce, tamarind paste, and sugar. Stir-fry until combined. Step 6: Add bean sprouts, toss lightly, and serve garnished with peanuts, lime, and cilantro."
    }
  },
  {
    food: {
      title: "Falafel",
      text: "A deep-fried ball made from ground chickpeas, herbs, and spices, commonly served in pita bread with vegetables and sauces.",
      img: "picture/Falafel2.jpg"
    },
    ingredients: {
      p1: "1 cup dried chickpeas (soaked overnight). 1 small onion, chopped. 2 cloves garlic. 1/4 cup fresh parsley. 1 tsp cumin. 1/2 tsp coriander. 1/2 tsp salt. 1/4 tsp black pepper. 1/4 tsp baking powder. Oil for frying. Pita bread, lettuce, tomato, and tahini sauce for serving."
    },
    recipe: {
      img: "picture/Falafel3.webp",
      p1: "Step 1: Drain soaked chickpeas and blend with onion, garlic, parsley, cumin, coriander, salt, and pepper until coarse. Step 2: Stir in baking powder. Step 3: Shape mixture into small balls or patties. Step 4: Heat oil and deep-fry until golden brown. Step 5: Serve in pita bread with lettuce, tomato, and tahini sauce."
    }
  },
  {
    food: {
      title: "Satay",
      text: "Grilled skewers of marinated meat served with a flavorful peanut sauce, popular in Southeast Asia.",
      img: "picture/Satay2.jpg"
    },
    ingredients: {
      p1: "500g chicken, beef, or lamb, cut into cubes. 2 tbsp soy sauce. 1 tbsp brown sugar. 1 tbsp turmeric powder. 1 tsp coriander powder. 1/2 tsp salt. Bamboo skewers. Peanut sauce: 1/2 cup peanut butter, 2 tbsp soy sauce, 1 tbsp lime juice, 1 tbsp brown sugar, water to thin."
    },
    recipe: {
      img: "picture/Satay3.webp",
      p1: "Step 1: Mix meat with soy sauce, brown sugar, turmeric, coriander, and salt. Marinate for at least 1 hour. Step 2: Thread meat onto bamboo skewers. Step 3: Grill over medium heat until cooked and slightly charred. Step 4: Mix peanut sauce ingredients until smooth. Step 5: Serve skewers with peanut sauce on the side."
    }
  },
  {
    food: {
      title: "Poutine",
      text: "A Canadian street food classic made of French fries topped with cheese curds and hot gravy.",
      img: "picture/Poutine2.jpg"
    },
    ingredients: {
      p1: "4 cups French fries. 1 cup cheese curds. 2 cups beef or chicken gravy. Salt and pepper to taste."
    },
    recipe: {
      img: "picture/Poutine3.avif",
      p1: "Step 1: Prepare French fries until crispy. Step 2: Warm the gravy in a saucepan. Step 3: Place fries on a plate, sprinkle with cheese curds. Step 4: Pour hot gravy over the fries and curds. Step 5: Serve immediately while cheese begins to melt."
    }
  },
  {
    food: {
      title: "Jerk Chicken",
      text: "A Jamaican dish of chicken marinated in spicy jerk seasoning and grilled to perfection.",
      img: "picture/JerkChicken2.jpg"
    },
    ingredients: {
      p1: "1 whole chicken (cut into pieces). 2 tbsp jerk seasoning. 2 tbsp soy sauce. 1 tbsp brown sugar. 2 cloves garlic, minced. 1 tbsp lime juice. Salt and pepper to taste."
    },
    recipe: {
      img: "picture/JerkChicken3.jpg",
      p1: "Step 1: Mix jerk seasoning, soy sauce, sugar, garlic, lime juice, salt, and pepper into a marinade. Step 2: Coat chicken pieces and marinate for at least 4 hours, preferably overnight. Step 3: Preheat grill to medium-high heat. Step 4: Grill chicken for 30–40 minutes, turning occasionally, until charred and fully cooked. Step 5: Serve with rice and peas."
    }
  },
  {
    food: {
      title: "Takoyaki",
      text: "A Japanese snack made of wheat batter filled with diced octopus, tempura scraps, pickled ginger, and green onion, cooked in a special molded pan.",
      img: "picture/Takoyaki2.jpg"
    },
    ingredients: {
      p1: "1 cup all-purpose flour. 2 eggs. 2 cups dashi stock. 1/2 cup diced octopus. 1/4 cup chopped green onion. 2 tbsp pickled ginger. 1/4 cup tempura scraps. Takoyaki sauce, mayo, bonito flakes for topping."
    },
    recipe: {
      img: "picture/Takoyaki3.jpg",
      p1: "Step 1: Mix flour, eggs, and dashi stock to make a thin batter. Step 2: Heat a takoyaki pan and oil well. Step 3: Pour batter into molds, add octopus, green onion, ginger, and tempura scraps. Step 4: Cook until edges firm, then flip balls using skewers to form round shapes. Step 5: Continue turning until golden brown. Step 6: Serve with takoyaki sauce, mayo, and bonito flakes."
    }
  },
  {
    food: {
      title: "Empanadas",
      text: "A popular Latin American pastry filled with beef, chicken, or cheese, then baked or fried until golden.",
      img: "picture/Empanadas2.jpg"
    },
    ingredients: {
      p1: "2 cups flour. 1/2 cup butter. 1/3 cup water. 1 tsp salt. 1 egg (for dough). Filling: 300g ground beef or chicken, 1 onion, diced, 1 tsp paprika, 1 tsp cumin, salt, pepper."
    },
    recipe: {
      img: "picture/Empanadas3.jpg",
      p1: "Step 1: Mix flour, butter, salt, water, and egg into a dough. Rest 30 minutes. Step 2: Prepare filling by cooking meat with onion and spices. Step 3: Roll dough thin and cut circles. Step 4: Place filling in center, fold, and seal edges. Step 5: Fry until golden or bake at 200°C for 20–25 minutes. Step 6: Serve hot."
    }
  },
  {
    food: {
      title: "Char Kway Teow",
      text: "A popular stir-fried noodle dish made with flat rice noodles, prawns, Chinese sausage, egg, bean sprouts, and soy sauce.",
      img: "picture/CharKwayTeow2.jpg"
    },
    ingredients: {
      p1: "300g flat rice noodles. 2 eggs. 100g prawns. 1 Chinese sausage, sliced. 1 cup bean sprouts. 2 tbsp soy sauce. 1 tbsp dark soy sauce. 2 cloves garlic, chopped. 1 tbsp chili paste."
    },
    recipe: {
      img: "picture/CharKwayTeow3.jpg",
      p1: "Step 1: Heat wok with oil, fry garlic until fragrant. Step 2: Add prawns and sausage, stir-fry. Step 3: Push aside, add eggs and scramble. Step 4: Add noodles, soy sauces, and chili paste, stir-fry quickly over high heat. Step 5: Toss in bean sprouts, stir briefly, and serve hot."
    }
  },
  {
    food: {
      title: "Dumplings",
      text: "Chinese dumplings filled with meat and vegetables, enjoyed boiled, steamed, or pan-fried.",
      img: "picture/Dumplings2.jpg"
    },
    ingredients: {
      p1: "Dumpling wrappers. 300g minced pork. 1 cup cabbage, chopped. 2 garlic cloves. 1 tbsp soy sauce. 1 tsp sesame oil. Salt and pepper."
    },
    recipe: {
      img: "picture/Dumplings3.jpg",
      p1: "Step 1: Mix pork, cabbage, garlic, soy sauce, sesame oil, salt, and pepper. Step 2: Place filling in dumpling wrapper and fold. Step 3: Boil until dumplings float, or pan-fry until golden. Step 4: Serve with dipping sauce."
    }
  },
  {
    food: {
      title: "Baguette Sandwich",
      text: "French baguette filled with butter, ham, and sometimes cheese – a popular grab-and-go snack in Paris.",
      img: "picture/BaguetteSandwich2.jpg"
    },
    ingredients: {
      p1: "1 fresh baguette. 100g ham slices. 50g butter. Cheese slices (optional). Lettuce or tomato (optional)."
    },
    recipe: {
      img: "picture/BaguetteSandwich3.png",
      p1: "Step 1: Slice baguette lengthwise. Step 2: Spread butter generously. Step 3: Layer with ham (and cheese if desired). Step 4: Close baguette and cut into portions. Serve fresh."
    }
  },
  {
    food: {
      title: "Suya",
      text: "Nigerian spicy skewered meat, grilled over open flame, served with onions and spicy peanut powder.",
      img: "picture/Suya2.jpeg"
    },
    ingredients: {
      p1: "500g beef or chicken, sliced thinly. 2 tbsp ground peanuts. 1 tbsp paprika. 1 tbsp cayenne pepper. 1 tsp garlic powder. Salt, oil. Bamboo skewers."
    },
    recipe: {
      img: "picture/Suya3.jpg",
      p1: "Step 1: Mix ground peanuts with spices. Step 2: Coat meat slices in spice mixture. Step 3: Thread meat onto skewers. Step 4: Grill over medium heat until cooked. Step 5: Serve hot with sliced onions and extra peanut spice."
    }
  },
  {
    food: {
      title: "Dagwood Dog",
      text: "A popular Australian street food, similar to a corn dog: a sausage coated in a thick batter and deep-fried until golden and crispy.",
      img: "picture/DagwoodDog2.jpg"
    },
    ingredients: {
      p1: "4 sausages, 1 cup flour, 1/2 cup cornmeal, 1 tbsp sugar, 1 tsp baking powder, 1/4 tsp salt, 1/2 cup milk, 1 egg, oil for frying, skewers."
    },
    recipe: {
      img: "picture/DagwoodDog3.webp",
      p1: "Step 1: Insert skewers into sausages. Step 2: Mix flour, cornmeal, sugar, baking powder, salt. Step 3: Whisk milk and egg, combine with dry ingredients to form thick batter. Step 4: Heat oil to 180°C. Step 5: Dip sausages in batter, fry until golden brown. Step 6: Drain on paper towels and serve hot with sauces like ketchup or mustard."
    }
  },
  {
    food: {
      title: "Hamdog",
      text: "A creative Australian street food combining a hamburger and a hotdog: a beef patty and a sausage served together in a single bun with toppings.",
      img: "picture/Hamdog2.jpeg"
    },
    ingredients: {
      p1: "1 hotdog bun. 1 beef patty. 1 sausage. 1 slice cheese, lettuce, tomato, onion, ketchup, mustard, mayonnaise."
    },
    recipe: {
      img: "picture/Hamdog3.webp",
      p1: "Step 1: Grill the beef patty and sausage until cooked. Step 2: Toast the bun lightly. Step 3: Place the beef patty inside the bun, add the sausage on top. Step 4: Add cheese, lettuce, tomato, onion, and sauces. Step 5: Serve hot as a street food snack."
    }
  }
];

function findPageIndexByTitle(title){
  const idx = pages.findIndex(p => (p.food && (p.food.title || '')).toLowerCase() === String(title||'').toLowerCase());
  return idx;
}

function ensurePageForTitle(title){
  const idx = findPageIndexByTitle(title);
  if (idx !== -1) return idx;
  // If shared dataset exists, derive a basic page from it; otherwise create blank
  try {
    const list = (window.SiteData && Array.isArray(window.SiteData.foods)) ? window.SiteData.foods : [];
    const item = list.find(x => (x.title || '').toLowerCase() === String(title||'').toLowerCase());
    if (item) {
      pages.push({
        food: { title: item.title, text: item.description || "", img: (item.images && item.images.cover) ? item.images.cover.replace("../street food/", "") : "picture/food_patter_icon.png" },
        ingredients: { p1: (typeof item.ingredients === 'string' ? item.ingredients : '') || '' },
        recipe: { img: "", p1: "" }
      });
    } else {
      pages.push({ food: { title: title, text: "", img: "picture/food_patter_icon.png" }, ingredients: { p1: "" }, recipe: { img: "", p1: "" } });
    }
  } catch(e) {
    pages.push({ food: { title: title, text: "", img: "picture/food_patter_icon.png" }, ingredients: { p1: "" }, recipe: { img: "", p1: "" } });
  }
  return pages.length - 1;
}

function renderPage() {
  const urlParams = new URLSearchParams(window.location.search);
  const titleParam = urlParams.get("title");
  let pageIndex;
  if (titleParam) {
    pageIndex = ensurePageForTitle(titleParam);
  } else {
    pageIndex = parseInt(urlParams.get("page") || "1") - 1;
  }

  if (pageIndex < 0 || pageIndex >= pages.length) {
    document.getElementById("app").innerHTML = "<h2>Page not found</h2>";
    return;
  }

  const page = pages[pageIndex];
  const template = document.getElementById("page-template");
  const clone = template.content.cloneNode(true);

  // Food
  clone.querySelector(".food-title").textContent = page.food.title;
  clone.querySelector(".food-text").textContent = page.food.text;
  clone.querySelector(".food-img-src").src = page.food.img;

  // About button should link to the specific Food Info page
  const aboutBtn = clone.querySelector('.about-btn');
  if (aboutBtn) {
    // Replace default #about anchor with cross-page link
    aboutBtn.addEventListener('click', function(e){
      e.preventDefault();
      window.location.href = `../Ben/FoodInfo.html?food=${encodeURIComponent(page.food.title || '')}`;
    });
  }

  // Ingredients
  const ingredientsP1Container = clone.querySelector(".ingredients-p1");
    ingredientsP1Container.innerHTML = ""; 
    const sentences = page.ingredients.p1.split(/(?<=\.)\s+/);
    sentences.forEach(sentence => {
        const p = document.createElement("p");
        p.textContent = "• " + sentence.trim();
        ingredientsP1Container.appendChild(p);
    });

  //Recipe
  clone.querySelector(".recipe-title").textContent = "How to Make " + page.food.title;
  const RecipeP1Container = clone.querySelector(".recipe-p1");
  RecipeP1Container.innerHTML = ""; 
  const sentences1 = page.recipe.p1.split(/(?=Step\s*\d*:)/);
  sentences1.forEach(sentence => {
    sentence = sentence.trim();
    const p1 = document.createElement("p");

    if (sentence.startsWith("Step")) {
        const match = sentence.match(/^(Step\s*\d*:)(.*)$/);
        if (match) {
            const stepSpan = document.createElement("span");
            stepSpan.classList.add("step-label");
            stepSpan.textContent = match[1];

            const descSpan = document.createElement("span");
            descSpan.textContent = match[2]; 

            p1.appendChild(stepSpan);
            p1.appendChild(document.createTextNode(" ")); 
            p1.appendChild(descSpan);
        } else {
            p1.textContent = sentence; 
        }
    } else {
        p1.textContent = sentence;
    }

    RecipeP1Container.appendChild(p1);
    
  });

  const recipeImg = clone.querySelector(".recipe-img-src");
  if (page.recipe.img) {
    recipeImg.src = page.recipe.img; 
    recipeImg.alt = "Recipe of " + page.food.title;
  } else {
    recipeImg.style.display = "none"; 
  }

  // Button
  const nav = document.createElement("div");
  nav.className = "nav-buttons";
  nav.innerHTML = `
    <button class="prev-btn" onclick="setPageIndex(${(pageIndex - 1 + pages.length) % pages.length})">
      <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512">
      <path d="M310.6 233.4c12.5 12.5 12.5 32.8 
        0 45.3l-192 192c-12.5 12.5-32.8 12.5 
        -45.3 0s-12.5-32.8 0-45.3L242.7 256 
        73.4 86.6c-12.5-12.5-12.5-32.8 
        0-45.3s32.8-12.5 45.3 0l192 192z">
        </path>
      </svg>
      <span>Prev</span>
    </button>

    <button class="next-btn" onclick="setPageIndex(${(pageIndex + 1) % pages.length})">
      <span>Next</span>
      <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512">
        <path d="M310.6 233.4c12.5 12.5 12.5 32.8 
        0 45.3l-192 192c-12.5 12.5-32.8 12.5 
        -45.3 0s-12.5-32.8 0-45.3L242.7 256 
        73.4 86.6c-12.5-12.5-12.5-32.8 
        0-45.3s32.8-12.5 45.3 0l192 192z">
        </path>
      </svg>
    </button>
  `;
  clone.appendChild(nav);

  document.getElementById("app").innerHTML = "";
  document.getElementById("app").appendChild(clone);
}

function setPageIndex(index) {
  window.history.pushState({}, "", `?page=${index + 1}`);
  renderPage();
  window.scrollTo({ top: 0 });
}

window.addEventListener("popstate", renderPage);

document.addEventListener("DOMContentLoaded", function(){
  // If there is a shared dataset, append any missing items as blank pages so navigation covers all
  try {
    const list = (window.SiteData && Array.isArray(window.SiteData.foods)) ? window.SiteData.foods : [];
    const have = new Set(pages.map(p => (p.food && p.food.title) || ''));
    list.forEach(item => {
      const title = item.title || '';
      if (!title || have.has(title)) return;
      pages.push({
        food: { title: title, text: item.description || '', img: (item.images && item.images.cover) ? item.images.cover.replace("../street food/", "") : "picture/food_patter_icon.png" },
        ingredients: { p1: (typeof item.ingredients === 'string' ? item.ingredients : '') || '' },
        recipe: { img: "", p1: "" }
      });
      have.add(title);
    });
  } catch(e) {}
  renderPage();
});
// Initialize AOS intro animations if available
try { if (window.AOS && AOS.init) AOS.init({ once: true, duration: 600, easing: 'ease-out' }); } catch(e) {}
