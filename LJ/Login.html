<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Global Street Eats </title>
  <link href="https://fonts.googleapis.com/css2?family=Alegreya:wght@400;700&family=Belleza&display=swap" rel="stylesheet">
  <link href="Login.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="Login.js"></script>
</head>
<body>

  <div id="rain-container"></div>
  <input type="checkbox" id="flip-toggle" />


  <label class="switch" for="flip-toggle">
  </label>

  <div class="scene" style="width: 420px; margin: auto;">
    <div class="card">

      <div class="face front">
        <img src="pictures/cutlery.png" class="logo" width="70" alt="">
        <h1>Global Street Eats</h1>
        <p class="description">Welcome back! Your next flavor adventure awaits.</p>
        <form>
          <div class="form-group">
            <label>Email</label>
            <div class="input-wrapper">
              <img src="pictures/email.png" class="input-icon" alt="">
              <input type="email" class="input" placeholder="you@example.com" required>
            </div>
          </div>
          <div class="form-group">
            <label>Password</label>
            <div class="input-wrapper">
              <img src="pictures/lock.png" class="input-icon" alt="">
              <input type="password" class="input" placeholder="••••••••" required>
            </div>
            <div id="login-error" style="color: red; font-size: 1rem; margin-top: 5px; display: none;"></div>
          </div>
          <button class="button">Log In</button>
        </form>
        <p style="margin-top:1rem;">
          <span class="text-muted">Don't have an account?</span>
          <label for="flip-toggle" class="link">Sign Up</label>
        </p>
        <p style="margin-top: 1.5rem;">
        <a href="forgot-password.html" class="link">Forgot password?</a>
        </p>
      </div>


      <div class="face back">
        <img src="pictures/cutlery.png" class="logo" width="70" alt="">
        <h1>Create Account</h1>
        <p class="description">Join us and explore new flavors!</p>
        <form>
          <div class="form-group">
            <label>Name</label>
            <div class="input-wrapper">
              <img src="pictures/user.png" class="input-icon" alt="">
              <input type="text" class="input" placeholder="Full Name" required>
            </div>
          </div>
          <div class="form-group">
            <label>Email</label>
            <div class="input-wrapper">
              <img src="pictures/email.png" class="input-icon" alt="">
              <input type="email" class="input" placeholder="you@example.com" required>
            </div>
          </div>
          <div class="form-group">
            <label>Password</label>
            <div class="input-wrapper">
              <img src="pictures/lock.png" class="input-icon" alt="">
              <input type="password" class="input" id="signup-password" placeholder="••••••••" required>
            </div>
            <div id="password-strength-bar"></div>
            <div id="password-requirements">
              <p>Password must contain:</p>
              <ul>
                <li id="req-length">Minimum 8 characters</li>
                <li id="req-special">At least 1 special symbol</li>
                <li id="req-number">At least 1 numeric number</li>
                <li id="req-capital">At least 1 capital letter</li>
              </ul>
            </div>
          </div>
          <button class="button">Sign Up</button>
          <div id="signup-success-message" style="color: green; font-size: 1rem;  display: none;">Sign-up successful! Please log in.</div>
          
        </form>
        <p style="margin-top:0.1rem;">
          <span class="text-muted">Already have an account?</span>
          <label for="flip-toggle" class="link">Log In</label>
        </p>
      </div>
    </div>
  </div>

  <script>
    // Helper functions (copied from sharedComponent.js for self-containment)
    function getCookie(name) {
      const nameEQ = name + "=";
      const ca = document.cookie.split(';');
      for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }
    
    function getCurrentUser() {
      const usersCookie = getCookie('users');
      if (usersCookie) {
          const users = JSON.parse(usersCookie);
          if (users.length > 0) {
              return users[0].name;
          }
      }
      return null;
    }

    document.addEventListener('DOMContentLoaded', () => {
      console.log('LoginPage: DOMContentLoaded');
      console.log('LoginPage: document.cookie on load:', document.cookie);
      console.log('LoginPage: getCurrentUser() on load:', getCurrentUser());
    });
  </script>
</body>
</html>
